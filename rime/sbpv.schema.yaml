# Rime schema
# encoding: utf-8

schema:
  schema_id: sbpv
  name: "SBPV 雙拼"
  version: '1.0'
  author:
    - MISTER_CHAN
  description: |
    粵語
  dependencies:
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ "中", "Ａ" ]
  - name: full_shape
    states: [ "◢", "■" ]
  - name: ascii_punct
    states: [ "。，", "．，" ]
  - options: [ trad_graph, simplification ]
    reset: 0
    states: [ "傳統字形", "大陆标准" ]
  - name: emoji_suggestion
    reset: 1

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - reverse_lookup_translator
  filters:
    - simplifier@trad_graph
    - simplifier@simp_trad_graph
    - simplifier
    - simplifier@emoji_suggestion
    - uniquifier
    - charset_filter@gbk

speller:
  alphabet: abcdefghijklmnopqrstuvwxyz
  delimiter: " '"
  algebra:
    - xform/aau/Q/
    - xform/^w|aai/W/
    - xform/(?<!o)e(?=\d)/E/
    - xform/k(?=u\d|ui|un\d|ut)|kw|(?<![aeou])e?i(?=\d)/I/
    - xform/g(?=u\d|ui|un\d|ut)|gw|ui|eoi/R/
    - xform/^t|(?<!^)[ei]u/T/
    - xform/(?:yu|(?<![csz])oe)(?=\d)/Y/
    - xform/(?<![aeio])o?u(?=\d)/U/
    - xform/o(?=\d)/O/
    - xform/^p|oi/P/
    - xform/aa(?=\d)/A/
    - xform/s(?!oe\d)|au/S/
    - xform/d|ai/D/
    - xform/f|(?<!a)a[nt](?=\d)/F/
    - xform/^g|(?<!a)a[mp]/G/
    - xform/h|y?u[nt](?=\d)/H/
    - xform/j|e?o[nt](?=\d)/J/
    - xform/^k|i[nt](?=\d)/K/
    - xform/l|(?<!^)[ei][mp]/L/
    - xform/z(?!oe\d)|aa[nt](?=\d)/Z/
    - xform/[sz]|aa[mp]/X/
    - xform/oe\d/Y/
    - xform/c|aa?(?:ng|k)/C/
    - xform/^ng|(?:i|(?<!o)e)(?:ng|k)/V/
    - xform/b|oe(?:ng|k)/B/
    - xform/^n|u(?:ng|k)/N/
    - xform/^m|o(?:ng|k)/M/
    - erase/^.*[a-z].*$/
    - xlit/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/
    - xform/\d//
    - abbrev/^..+$/./

translator:
  dictionary: jyut6ping3
  spelling_hints: 0
  prism: sbpv
  preedit_format:
    - xlit/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/

reverse_lookup:
  dictionary: stroke
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: 〔筆畫〕
  preedit_format:
    - xform/`(.+)/$1/
    - xlit/hspnz/一丨丿丶乙/
  comment_format:

emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion

trad_graph:
  opencc_config: nto.json
  option_name: trad_graph

simp_trad_graph:
  opencc_config: tts.json
  option_name: simp_trad_graph

punctuator:
  import_preset: symbols_cantonese
  full_shape:
    '<' : '《'
    '>' : '》'
    '[' : '「'
    '\' : '、'
    ']' : '」'
    '{' : '『'
    '}' : '』'
  half_shape:
    '<' : '《'
    '>' : '》'
    '[' : '「'
    '\' : '、'
    ']' : '」'
    '{' : '『'
    '}' : '』'

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "^`[hspnz]*'?$"
